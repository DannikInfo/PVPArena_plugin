apply plugin: 'java'

ant.loadproperties(srcFile: "version.properties")
version = ant.properties['vMajor'] + "." + ant.properties['vMinor'] + "." + ant.properties['vPatch'] + ant.properties['vSuffix']

group = "dannnikinfo"
archivesBaseName = "PVPArena"

repositories {
    flatDir {
       dirs 'lib'
   }
}

dependencies {
    compile 'com.spigot:spigot:1.7.10-SNAPSHOT-b1657'
}

processResources
{
    // this will ensure that this task is redone when the versions change.
    inputs.property "version", project.version

    // replace stuff in mcmod.info, nothing else
    from(sourceSets.main.resources.srcDirs) {
        include 'plugin.yml'
                
        // replace version and mcversion
        expand 'version':project.version
    }
        
    // copy everything else, thats not the mcmod.info
    from(sourceSets.main.resources.srcDirs) {
        exclude 'plugin.yml'
    }
}


task addVersion {
    inputs.property "version", project.version
    outputs.file "version.properties"
}

addVersion << {
    ant.propertyfile(file: "version.properties") {
        entry( key: "vPatch", type: int, value: 1, operation: "+" )
    }
}